library(blogdown)
blogdown:::serve_site()
blogdown:::serve_site()
blogdown::stop_server()
blogdown:::serve_site()
blogdown:::serve_site()
blogdown::stop_server()
blogdown:::serve_site()
library(blogdown)
blogdown:::serve_site()
blogdown:::serve_site()
blogdown:::serve_site()
blogdown::stop_server()
blogdown:::serve_site()
library(blogdown)
blogdown:::serve_site()
blogdown:::serve_site()
blogdown:::serve_site()
blogdown:::serve_site()
q()
q()
blogdown:::serve_site()
blogdown:::serve_site()
q()
q()
q()
blogdown:::preview_site(startup = TRUE)
blogdown:::preview_site(startup = TRUE)
blogdown:::preview_site(startup = TRUE)
blogdown:::preview_site(startup = TRUE)
blogdown:::preview_site(startup = TRUE)
hugo new  --kind post post/my-article-name
blogdown:::preview_site()
q()
q()
q()
q()
blogdown:::preview_site()
blogdown:::preview_site()
blogdown:::preview_site()
q()
blogdown:::preview_site()
remotes::install_github("grantmcdermott/lecturenotes", dependencies = TRUE)
remotes::install_github("grantmcdermott/lecturenotes")
remotes::install_github("grantmcdermott/lecturenotes", force = TRUE)
q()
pip3 install -U academic
academic import --bibtex </Users/hhadah/Documents/GiT/website/content/publication/publications.bib>
q()
q()
blogdown:::preview_site()
q()
blogdown:::preview_site()
blogdown:::preview_site()
blogdown:::preview_site()
blogdown:::preview_site()
blogdown:::preview_site()
---
title: "Democracy and Ethnic Favoritism: Evidence from Sub-Saharan Africa"
date: 2021-11-14
research_type:
- journal-article
links:
- name: Paper
url: HussainHadahEthFav.pdf
icon: far fa-file-pdf
local: true
q()
q()
Grades <- read.csv("/Users/hhadah/Downloads/gc_H_20221_ECON_2302_14467_fullgc_2022-05-12-14-38-49.csv")
View(Grades)
Grades[is.na(Grades)] <- 0
names(Grades)
Grades <- Grades %>%
.
library(dplyr)
Grades <- Grades %>%
mutate(HW_Average = rowMeans(grep(pattern="^Homework", colnames(Grades))))
grep(pattern="^Homework", colnames(Grades))
Grades <- Grades %>% mutate(HW_Average = rowMeans(Grades[,grep(pattern="^Homework", colnames(Grades))]))
Grades <- Grades %>% mutate(HW_Average = rowSums((Grades[,grep(pattern="^Homework", colnames(Grades))] + 44)/12))
Grades <- Grades %>% mutate(HW_Average = rowSums((Grades[,grep(pattern="^Ch", colnames(Grades))] + 44)/12))
?grep
# This a script clean
# GSS data
# date: May 18th, 2022
if (!require("pacman")) install.packages("pacman")
pacman::p_load(tictoc, parallel, pbapply, future,
future.apply, furrr, RhpcBLASctl, memoise,
here, foreign, mfx, tidyverse, hrbrthemes,
estimatr, ivreg, fixest, sandwich, lmtest,
margins, vtable, broom, modelsummary,
stargazer, fastDummies, recipes, dummy,
gplots, haven, huxtable, kableExtra,
gmodels, survey, gtsummary, data.table,
tidyfast, dtplyr, microbenchmark, ggpubr,
tibble, viridis, wesanderson, censReg,
rstatix, srvyr, formatR, sysfonts,
showtextdb, showtext, thematic,
sampleSelection, textme, paletteer,
wesanderson, patchwork, RStata, car,
textme, lodown)
options("RStata.StataPath" = "/Applications/Stata/StataSE.app/Contents/MacOS/stata-se")
options("RStata.StataVersion" = 17)
# devtools::install_github("thomasp85/patchwork")
# devtools::install_github("ajdamico/lodown")
## My preferred ggplot2 plotting theme (optional)
## https://github.com/hrbrmstr/hrbrthemes
# scale_fill_ipsum()
# scale_color_ipsum()
font_add_google("Fira Sans", "firasans")
font_add_google("Fira Code", "firasans")
showtext_auto()
theme_customs <- theme(
text = element_text(family = 'firasans', size = 16),
plot.title.position = 'plot',
plot.title = element_text(
face = 'bold',
colour = thematic::okabe_ito(8)[6],
margin = margin(t = 2, r = 0, b = 7, l = 0, unit = "mm")
),
)
colors <-  thematic::okabe_ito(5)
# theme_set(theme_minimal() + theme_customs)
theme_set(hrbrthemes::theme_ipsum() + theme_customs)
## Set master directory where all sub-directories are located
mdir <- "/Users/hhadah/Dropbox/Research/GSS"
# mdir <- "C:\\Users\\16023\\Dropbox\\Research\\My Research Data and Ideas\\Identification_Paper"
## Set working directories
workdir  <- paste0(mdir,"/Data/Datasets")
rawdatadir  <- paste0(mdir,"/Data/Raw")
## Set working directory
# COLOR PALLETES
library(paletteer)
# paletteer_d("awtools::a_palette")
# paletteer_d("suffrager::CarolMan")
### COLOR BLIND PALLETES
paletteer_d("colorblindr::OkabeIto")
paletteer_d("colorblindr::OkabeIto_black")
paletteer_d("colorBlindness::paletteMartin")
paletteer_d("colorBlindness::Blue2DarkRed18Steps")
paletteer_d("colorBlindness::SteppedSequential5Steps")
paletteer_d("colorBlindness::PairedColor12Steps")
paletteer_d("colorBlindness::ModifiedSpectralScheme11Steps")
colorBlindness <- paletteer_d("colorBlindness::Blue2Orange12Steps")
cbbPalette <- c("#000000", "#E69F00", "#56B4E9", "#009E73", "#F0E442", "#0072B2", "#D55E00", "#CC79A7")
# scale_colour_paletteer_d("colorBlindness::ModifiedSpectralScheme11Steps", dynamic = FALSE)
# To use for fills, add
scale_fill_manual(values="colorBlindness::Blue2Orange12Steps")
scale_color_paletteer_d("nord::aurora")
scale_color_paletteer_d("colorBlindness::Blue2Orange12Steps")
# To use for line and point colors, add
scale_colour_manual(values="colorBlindness::Blue2Orange12Steps")
### read GSS data
GSS <- read_csv(paste0(rawdatadir,"/GSS.csv")) %>%
rename("year"="YEAR",
"id"="ID_")
### read Geocode data
Geocode <- read_dta(paste0(rawdatadir,"/cross7214_geo.dta"))
### Merge GSS and geocode
Geocode_GSS <- left_join(
GSS,
Geocode,
na_matches = "never",
by = c("year", "id"))
Geocode_GSS <- Geocode_GSS %>%
filter(!is.na(fipsstat))
write_csv(Geocode_GSS, paste0(workdir,"/Geocoded_GSS.csv"))
# This a script clean
# GSS data
# date: May 18th, 2022
if (!require("pacman")) install.packages("pacman")
pacman::p_load(tictoc, parallel, pbapply, future,
future.apply, furrr, RhpcBLASctl, memoise,
here, foreign, mfx, tidyverse, hrbrthemes,
estimatr, ivreg, fixest, sandwich, lmtest,
margins, vtable, broom, modelsummary,
stargazer, fastDummies, recipes, dummy,
gplots, haven, huxtable, kableExtra,
gmodels, survey, gtsummary, data.table,
tidyfast, dtplyr, microbenchmark, ggpubr,
tibble, viridis, wesanderson, censReg,
rstatix, srvyr, formatR, sysfonts,
showtextdb, showtext, thematic,
sampleSelection, textme, paletteer,
wesanderson, patchwork, RStata, car,
textme, lodown)
options("RStata.StataPath" = "/Applications/Stata/StataSE.app/Contents/MacOS/stata-se")
options("RStata.StataVersion" = 17)
# devtools::install_github("thomasp85/patchwork")
# devtools::install_github("ajdamico/lodown")
## My preferred ggplot2 plotting theme (optional)
## https://github.com/hrbrmstr/hrbrthemes
# scale_fill_ipsum()
# scale_color_ipsum()
font_add_google("Fira Sans", "firasans")
font_add_google("Fira Code", "firasans")
showtext_auto()
theme_customs <- theme(
text = element_text(family = 'firasans', size = 16),
plot.title.position = 'plot',
plot.title = element_text(
face = 'bold',
colour = thematic::okabe_ito(8)[6],
margin = margin(t = 2, r = 0, b = 7, l = 0, unit = "mm")
),
)
colors <-  thematic::okabe_ito(5)
# theme_set(theme_minimal() + theme_customs)
theme_set(hrbrthemes::theme_ipsum() + theme_customs)
## Set master directory where all sub-directories are located
mdir <- "/Users/hhadah/Dropbox/Research/GSS"
# mdir <- "C:\\Users\\16023\\Dropbox\\Research\\My Research Data and Ideas\\Identification_Paper"
## Set working directories
workdir  <- paste0(mdir,"/Data/Datasets")
rawdatadir  <- paste0(mdir,"/Data/Raw")
## Set working directory
# COLOR PALLETES
library(paletteer)
# paletteer_d("awtools::a_palette")
# paletteer_d("suffrager::CarolMan")
### COLOR BLIND PALLETES
paletteer_d("colorblindr::OkabeIto")
paletteer_d("colorblindr::OkabeIto_black")
paletteer_d("colorBlindness::paletteMartin")
paletteer_d("colorBlindness::Blue2DarkRed18Steps")
paletteer_d("colorBlindness::SteppedSequential5Steps")
paletteer_d("colorBlindness::PairedColor12Steps")
paletteer_d("colorBlindness::ModifiedSpectralScheme11Steps")
colorBlindness <- paletteer_d("colorBlindness::Blue2Orange12Steps")
cbbPalette <- c("#000000", "#E69F00", "#56B4E9", "#009E73", "#F0E442", "#0072B2", "#D55E00", "#CC79A7")
# scale_colour_paletteer_d("colorBlindness::ModifiedSpectralScheme11Steps", dynamic = FALSE)
# To use for fills, add
scale_fill_manual(values="colorBlindness::Blue2Orange12Steps")
scale_color_paletteer_d("nord::aurora")
scale_color_paletteer_d("colorBlindness::Blue2Orange12Steps")
# To use for line and point colors, add
scale_colour_manual(values="colorBlindness::Blue2Orange12Steps")
### read GSS data
GSS <- read_csv(paste0(rawdatadir,"/GSS.csv")) %>%
rename("year"="YEAR",
"id"="ID_")
### read Geocode data
Geocode <- read_dta(paste0(rawdatadir,"/cross7214_geo.dta"))
### Merge GSS and geocode
Geocode_GSS <- left_join(
GSS,
Geocode,
na_matches = "never",
by = c("year", "id"))
names(Geocode_GSS)
GSS <- Geocode_GSS
rm(Geocode)
rm(Geocode_GSS)
GSS <- GSS %>% rename("YEAR"="year")
# Select answer from Whites
# that are at least 18
# year-old and drop missing
# value (missing values
# include people that
# answered do not know, no
# answer or not applicable.)
GSS <- GSS %>%
filter((AGE>=18 & RACE==1))
GSS <- GSS %>%
filter((RACMAR==2 | RACMAR==1) & (RACSEG==2 | RACSEG==1 | RACSEG==3 | RACSEG==4) & (RACFEW==2 | RACFEW==1 | RACHAF==2 | RACHAF==1 | RACMOST==2 | RACMOST==1) & (RACPRES==2 | RACPRES==1))
GSS <- GSS %>%
mutate(RACMAR = ifelse(RACMAR == 2, 0, 1))
GSS <- GSS %>%
mutate(RACSEG = (RACSEG*(-1)) + 5)
GSS <- GSS %>%
mutate(RACFEW = ifelse(RACFEW == 2, 0, 1))
GSS <- GSS %>%
mutate(RACHAF = ifelse(RACHAF == 2, 0, 1))
GSS <- GSS %>%
mutate(RACMOST = ifelse(RACMOST == 2, 0, 1))
GSS <- GSS %>%
group_by(REGION) %>%
mutate(racmar_average77 = mean(GSS$RACMAR[GSS$YEAR==1977], na.rm = T),
racseg_average77 = mean(GSS$RACSEG[GSS$YEAR==1977], na.rm = T),
racfew_average77 = mean(GSS$RACFEW[GSS$YEAR==1977], na.rm = T),
rachaf_average77 = mean(GSS$RACHAF[GSS$YEAR==1977], na.rm = T),
racmost_average77 = mean(GSS$RACMOST[GSS$YEAR==1977], na.rm = T),
racpres_average77 = mean(GSS$RACPRES[GSS$YEAR==1977], na.rm = T),
racmar_var77 = sd(GSS$RACMAR[GSS$YEAR==1977], na.rm = T),
racseg_var77 = sd(GSS$RACSEG[GSS$YEAR==1977], na.rm = T),
racfew_var77 = sd(GSS$RACFEW[GSS$YEAR==1977], na.rm = T),
rachaf_var77 = sd(GSS$RACHAF[GSS$YEAR==1977], na.rm = T),
racmost_var77 = sd(GSS$RACMOST[GSS$YEAR==1977], na.rm = T),
racpres_var77 = sd(GSS$RACPRES[GSS$YEAR==1977], na.rm = T))
GSS <- GSS %>%
group_by(YEAR, REGION) %>%
mutate(norm_racemar = (RACMAR - racmar_average77)/racmar_var77,
norm_racseg = (RACSEG - racseg_average77)/racseg_var77,
norm_racfew = (RACFEW - racfew_average77)/racfew_var77,
norm_rachaf = (RACHAF - rachaf_average77)/rachaf_var77,
norm_racmost = (RACMOST - racmost_average77)/racmost_var77,
norm_racpres = (RACPRES - racpres_average77)/racpres_var77)
# Now, I will calculate the
# aggregate measure using
# the following formula, where
# Kt is the total number of
# prejeduice questions
# asked in year t
GSS <- GSS %>%
group_by(YEAR, REGION) %>%
mutate(norm_racpeers = mean(norm_racfew + norm_rachaf + norm_racmost))
GSS <-  GSS %>%
group_by(YEAR, REGION) %>%
mutate(AggregateIndex = (norm_racemar + norm_racseg + norm_racpeers +
norm_racpres)/4)
GSS <-  GSS %>%
select(YEAR, norm_racemar, norm_racseg, norm_racfew,
norm_rachaf, norm_racmost, norm_racpres, norm_racpeers, AggregateIndex, fipsstat, REGION) %>%
group_by(YEAR, REGION) %>%
mutate(Mean_AggregateIndex = mean(AggregateIndex),
norm_racemar = mean(norm_racemar),
norm_racseg = mean(norm_racseg),
norm_racfew = mean(norm_racfew),
norm_rachaf = mean(norm_rachaf),
norm_racmost = mean(norm_racmost),
norm_racpres = mean(norm_racpres),
norm_racpeers = mean(norm_racpeers),
p20_Index = quantile(AggregateIndex, probs = 0.2),
p50_Index = quantile(AggregateIndex, probs = 0.5),
p90_Index = quantile(AggregateIndex, probs = 0.9))
GSS <- GSS %>%
select(YEAR, Mean_AggregateIndex, norm_racemar,
norm_racseg, norm_racpeers, norm_racpres, norm_racpeers, p20_Index, p50_Index, p90_Index, REGION, fipsstat
)
ggplot(GSS, aes(YEAR, Mean_AggregateIndex)) +
geom_point(aes(shape = factor(REGION))) +
scale_shape_manual(values = 1:nlevels(factor(GSS$REGION))) +
stat_summary(geom = "line", aes(color = factor(REGION))) +
labs(x = "Year", y = "Aggregate Index") +
ggtitle("Aggregate Index Overtime") +
# scale_color_paletteer_d("colorblindr::OkabeIto_black") +
scale_x_continuous(limits = c(1974,1996), breaks = c(1977, 1982, 1985, 1988, 1990, 1992, 1994, 1996))
summary(GSS)
q()
blogdown:::serve_site()
blogdown:::serve_site()
git clean -df
blogdown::hugo_version()
blogdown::hugo_version()
blogdown::hugo_version()
blogdown:::serve_site()
blogdown::hugo_version()
blogdown::hugo_version()
blogdown::hugo_version()
blogdown::hugo_version()
blogdown:::serve_site()
blogdown::hugo_version()
blogdown::hugo_installers()
blogdown::hugo_version()
advdate <- function(obj, adv) {
tmon <- obj + 7*(adv-1)
tfri <- obj + 4 + 7*(adv-1)
tmon <- format(tmon, format="%m/%d")
tfri <- format(tfri, format="%m/%d")
zadv <- sprintf("%02d", adv)
tmp <- paste("Week ",zadv,sep='',", ", tmon," - ",tfri)
return(tmp)
}
dvdate(mon, 1)
advdate(mon, 1)
View(advdate)
advdate(1,1)
advdate(1,Monday)
advdate(mon, 1)
advdate(mo100, 1)
advdate(100, 1)
advdate("mon", 1)
advdate(mon, 1)
mon <- as.Date("2022-07-11")
advdate(mon, 1)
blogdown:::preview_site()
blogdown:::preview_site()
